(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a90a4a9"],{"0c0c":function(e,t,a){},1945:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container floatRight"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"Title"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchResult(t)}},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}}),e._v(" "),a("el-select",{staticClass:"filter-item",staticStyle:{width:"140px"},on:{change:e.handleFilter},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.sortOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.searchResult}},[e._v("\n            搜索\n        ")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("\n            添加\n        ")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{"margin-top":"20px"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"订单ID",prop:"id",sortable:"",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"图书编号",prop:"b_no",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.b_no))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"图书名称",prop:"bname",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(n.bname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"破损时间",prop:"damage_at",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e._f("parseTime")(n.damage_at,"{y}-{m}-{d} {h}:{i}")))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"修复时间",prop:"repair_at",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(""==n.repair_at?"未修复":n.repair_at))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态","class-name":"status-col",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-tag",{attrs:{type:e._f("statusFilter")(0==n.repair?"未修复":"已修复")}},[e._v("\n                "+e._s(0==n.repair?"未修复":"已修复")+"\n            ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;t.$index;return[0==n.repair?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",type:"success",plain:""},on:{click:function(t){return e.handleModifyStatus(n,1)}}},[e._v("\n            修复\n        ")]):e._e(),e._v(" "),1==n.repair?a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{size:"mini",plain:"",disabled:""},on:{click:function(t){return e.handleModifyStatus(n,0)}}},[e._v("\n            已修复\n        ")]):e._e()]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogRepairBookVisible,title:"图书破损"},on:{"update:visible":function(t){e.dialogRepairBookVisible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:e.rules,model:e.temp,"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"图书编号",prop:"b_no"}},[a("el-input",{model:{value:e.temp.b_no,callback:function(t){e.$set(e.temp,"b_no",t)},expression:"temp.b_no"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书名称",prop:"bname"}},[a("el-input",{model:{value:e.temp.bname,callback:function(t){e.$set(e.temp,"bname",t)},expression:"temp.bname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"破损时间",prop:"damage_at"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"Please pick a date"},model:{value:e.temp.damage_at,callback:function(t){e.$set(e.temp,"damage_at",t)},expression:"temp.damage_at"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],on:{click:function(t){e.dialogRepairBookVisible=!1}}},[e._v("\n            取消\n            ")]),e._v(" "),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary"},on:{click:e.confirmAdd}},[e._v("\n            确定\n            ")])],1)],1)],1)},i=[],r=(a("96cf"),a("1da1")),o=a("b775"),s=a("4360");function l(e){return Object(o["a"])({url:"/api/v1/damage/list",method:"get",params:e,headers:{token:"".concat(s["a"].state.user.token)}})}function c(e){return Object(o["a"])({url:"/api/v1/damage/add",method:"POST",data:e,headers:{token:"".concat(s["a"].state.user.token)}})}function u(e){return Object(o["a"])({url:"/api/v1/damage/repair",method:"POST",data:{id:e},headers:{token:"".concat(s["a"].state.user.token)}})}function d(e){return Object(o["a"])({url:"/api/v1/damage/search",method:"get",params:e,headers:{token:"".concat(s["a"].state.user.token)}})}var p=a("6724"),f=a("ed08"),m=a("333d"),g={name:"damageManagement",components:{Pagination:m["a"]},directives:{waves:p["a"]},filters:{statusFilter:function(e){var t={"未修复":"info","已修复":"success","删除":"danger"};return t[e]},parseTime:f["b"]},data:function(){return{list:[],total:0,listQuery:{page:1,limit:10,status:2},keyWord:"",sortOptions:[{label:"未修复的订单",key:0},{label:"已修复的订单",key:1},{label:"全部订单",key:2}],listLoading:!1,rules:{b_no:[{required:!0,message:"请输入图书编号",trigger:"blur"}],damage_at:[{required:!0,message:"请输入破损时间",trigger:"change"}],bname:[{required:!0,message:"请输入图书名称",trigger:"blur"}]},temp:{b_no:"",damage_at:"",bname:""},dialogRepairBookVisible:!1}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,l(this.listQuery).then((function(t){e.list=t.data,e.list.map((function(e){""!=e.repair_at&&(e.repair_at=Object(f["b"])(e.repair_at,"{y}-{m}-{d} {h}:{i}"))})),e.total=t.data.length,e.listLoading=!1}))},searchResult:function(){var e=this;""!=this.keyWord.trim()?d({key:this.keyWord,page:1}).then((function(t){console.log(t),e.list=t.data,0==t.data.length&&e.$message({message:"未查询对应图书",type:"success",duration:1e3})})):this.$message({message:"请输入搜索内容",type:"warning",duration:2e3})},handleFilter:function(){this.listQuery.page=1,this.getList()},resetTemp:function(){this.temp={b_no:"",damage_at:"",bname:""}},handleCreate:function(){this.resetTemp(),this.dialogRepairBookVisible=!0},confirmAdd:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&(e.temp.damage_at=Object(f["b"])(e.temp.damage_at,"{y}-{m}-{d} {h}:{i}:{s}"),c(e.temp).then((function(){e.getList(),e.dialogRepairBookVisible=!1,e.$notify({title:"Success",message:"订单添加成功",type:"success",duration:2e3})})))}))},handleModifyStatus:function(e,t){this.$confirm("确认图书已经修复完成?","提示",{confirmButtonText:"取消",cancelButtonText:"确定",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u(e.id);case 2:e.repair=t,e.repair_at=Object(f["b"])(Date.now(),"{y}-{m}-{d} {h}:{i}");case 4:case"end":return a.stop()}}),a)})))).catch((function(e){console.log(e)}))}}},v=g,h=(a("d532"),a("2877")),b=Object(h["a"])(v,n,i,!1,null,null,null);t["default"]=b.exports},"1c64":function(e,t,a){},"1cc6":function(e,t,a){"use strict";var n=a("1c64"),i=a.n(n);i.a},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[];a("c5f6");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var n=s(),i=e-n,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var s=Math.easeInOutQuad(c,n,i,t);o(s),c<t?r(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(a("1cc6"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"f3b72548",null);t["a"]=p.exports},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},6724:function(e,t,a){"use strict";a("8d41");var n="@@wavesContext";function i(e,t){function a(a){var n=Object.assign({},t.value),i=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),r=i.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var o=r.getBoundingClientRect(),s=r.querySelector(".waves-ripple");switch(s?s.className="waves-ripple":(s=document.createElement("span"),s.className="waves-ripple",s.style.height=s.style.width=Math.max(o.width,o.height)+"px",r.appendChild(s)),i.type){case"center":s.style.top=o.height/2-s.offsetHeight/2+"px",s.style.left=o.width/2-s.offsetWidth/2+"px";break;default:s.style.top=(a.pageY-o.top-s.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",s.style.left=(a.pageX-o.left-s.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return s.style.backgroundColor=i.color,s.className="waves-ripple z-active",!1}}return e[n]?e[n].removeHandle=a:e[n]={removeHandle:a},a}var r={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[n].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[n].removeHandle,!1),e[n]=null,delete e[n]}},o=function(e){e.directive("waves",r)};window.Vue&&(window.waves=r,Vue.use(o)),r.install=o;t["a"]=r},"6b54":function(e,t,a){"use strict";a("3846");var n=a("cb7c"),i=a("0bfb"),r=a("9e1e"),o="toString",s=/./[o],l=function(e){a("2aba")(RegExp.prototype,o,e,!0)};a("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?l((function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?i.call(e):void 0)})):s.name!=o&&l((function(){return s.call(this)}))},"8d41":function(e,t,a){},aa77:function(e,t,a){var n=a("5ca1"),i=a("be13"),r=a("79e5"),o=a("fdef"),s="["+o+"]",l="​",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e,t,a){var i={},s=r((function(){return!!o[e]()||l[e]()!=l})),c=i[e]=s?t(p):o[e];a&&(i[a]=c),n(n.P+n.F*s,"String",i)},p=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},c5f6:function(e,t,a){"use strict";var n=a("7726"),i=a("69a8"),r=a("2d95"),o=a("5dbc"),s=a("6a99"),l=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,f="Number",m=n[f],g=m,v=m.prototype,h=r(a("2aeb")(v))==f,b="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():p(t,3);var a,n,i,r=t.charCodeAt(0);if(43===r||45===r){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var o,l=t.slice(2),c=0,u=l.length;c<u;c++)if(o=l.charCodeAt(c),o<48||o>i)return NaN;return parseInt(l,n)}}return+t};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof m&&(h?l((function(){v.valueOf.call(a)})):r(a)!=f)?o(new g(y(t)),a,m):y(t)};for(var _,w=a("9e1e")?c(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;w.length>k;k++)i(g,_=w[k])&&!i(m,_)&&d(m,_,u(g,_));m.prototype=v,v.constructor=m,a("2aba")(n,f,m)}},d532:function(e,t,a){"use strict";var n=a("0c0c"),i=a.n(n);i.a},ed08:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));a("28a5"),a("a481"),a("6b54");var n=a("53ca");function i(e,t,a){var n,i,r,o,s,l=function l(){var c=+new Date-o;c<t&&c>0?n=setTimeout(l,t-c):(n=null,a||(s=e.apply(r,i),n||(r=i=null)))};return function(){for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];r=this,o=+new Date;var d=a&&!n;return n||(n=setTimeout(l,t)),d&&(s=e.apply(r,c),r=c=null),s}}function r(e,t){if(0===arguments.length)return null;var a,i=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(n["a"])(e)?a=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),a=new Date(e));var r={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},o=i.replace(/{(y|m|d|h|i|s|a)+}/g,(function(e,t){var a=r[t];return"a"===t?["日","一","二","三","四","五","六"][a]:(e.length>0&&a<10&&(a="0"+a),a||0)}));return o}},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);